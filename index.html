<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      name="google-site-verification"
      content="QGAC2Jplumbg2qTONhRetPHxFgyr4kedInaocXNiZ7g"
    />
    <meta
      name="description"
      content="AI Problem Solver - Get AI-powered solutions for your problems. Access advanced AI tools and services."
    />
    <meta charset="UTF-8" />
    <link
      rel="icon"
      type="image/x-icon"
      href="https://cdn-icons-png.flaticon.com/512/4712/4712035.png"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Problem Solver - AI Solutions Platform | Muhammad Haris</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      /* Welcome Message Styling */
      .welcome-message {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 40px 20px;
        min-height: 400px;
      }

      /* AI Problem Solve Image Container */
      .ai-logo-container {
        max-width: 500px;
        width: 90%;
        margin-bottom: 30px;
        position: relative;
      }

      /* AI Problem Solve Image */
      .ai-logo-image {
        width: 100%;
        height: auto;
        border-radius: 15px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        animation: fadeInScale 1s ease-out forwards;
        border: 2px solid #4285F4;
      }

      .ai-logo-image:hover {
        transform: scale(1.01);
        transition: transform 0.3s ease;
      }

      /* Fallback text if image doesn't load */
      .image-fallback {
        display: none;
        font-family: 'Arial', sans-serif;
        font-size: 42px;
        font-weight: bold;
        color: white;
        background: linear-gradient(45deg, #4285F4, #EA4335, #FBBC05, #34A853);
        padding: 40px 20px;
        border-radius: 15px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        animation: fadeInScale 1s ease-out forwards;
        text-align: center;
        margin-bottom: 30px;
        width: 100%;
      }

      /* Welcome Text */
      .welcome-text {
        font-size: 22px;
        color: #555;
        line-height: 1.6;
        max-width: 700px;
        margin: 0 auto;
        font-weight: 500;
        animation: fadeInUp 1s ease-out 0.5s forwards;
        opacity: 0;
        transform: translateY(20px);
      }

      /* Tagline */
      .tagline {
        font-size: 18px;
        color: #4285F4;
        font-weight: 600;
        margin-top: 15px;
        padding: 8px 25px;
        background: rgba(66, 133, 244, 0.1);
        border-radius: 50px;
        display: inline-block;
        animation: fadeInUp 1s ease-out 0.8s forwards;
        opacity: 0;
        transform: translateY(20px);
      }

      /* Animations */
      @keyframes fadeInScale {
        0% {
          opacity: 0;
          transform: scale(0.9);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      @keyframes fadeInUp {
        0% {
          opacity: 0;
          transform: translateY(20px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Loading spinner for image */
      .image-loading {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 40px;
        min-height: 200px;
      }

      .spinner {
        width: 50px;
        height: 50px;
        border: 5px solid #f3f3f3;
        border-top: 5px solid #4285F4;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 20px;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .welcome-message {
          padding: 30px 15px;
          min-height: 350px;
        }

        .ai-logo-container {
          max-width: 400px;
          margin-bottom: 25px;
        }

        .image-fallback {
          font-size: 32px;
          padding: 30px 15px;
        }

        .welcome-text {
          font-size: 18px;
          padding: 0 15px;
        }

        .tagline {
          font-size: 16px;
          padding: 6px 20px;
        }
      }

      @media (max-width: 480px) {
        .welcome-message {
          padding: 20px 10px;
          min-height: 300px;
        }

        .ai-logo-container {
          max-width: 300px;
          margin-bottom: 20px;
        }

        .image-fallback {
          font-size: 24px;
          padding: 20px 10px;
        }

        .welcome-text {
          font-size: 16px;
        }

        .tagline {
          font-size: 14px;
          padding: 5px 15px;
        }
      }
    </style>
  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar -->
      <div class="sidebar">
        <div class="sidebar-header">
          <div class="user-profile">
            <img
              src="https://static.vecteezy.com/system/resources/previews/048/926/084/non_2x/silver-membership-icon-default-avatar-profile-icon-membership-icon-social-media-user-image-illustration-vector.jpg"
              alt="Profile Picture"
              class="profile-picture"
              id="profilePicture"
            />
            <div class="profile-controls">
              <button class="profile-btn" id="changeDpBtn">Change</button>
              <button class="profile-btn" id="removeDpBtn">Remove</button>
            </div>
          </div>
        </div>

        <div class="conversation-controls">
          <button id="newChat" class="sidebar-btn">
            <i class="fas fa-plus"></i> New Chat
          </button>
          <button
            id="clearHistory"
            class="sidebar-btn"
            onclick="clearChatHistory()"
          >
            <i class="fas fa-trash"></i> Clear History
          </button>
          <button id="settingsBtn" class="sidebar-btn">
            <i class="fas fa-cog"></i> Settings
          </button>
        </div>

        <div class="theme-toggle">
          <span>Dark Mode</span>
          <label class="toggle-switch">
            <input type="checkbox" id="darkModeToggle" />
            <span class="slider"></span>
          </label>
        </div>

        <div class="language-selector">
          <label for="language">Language:</label>
          <select id="language">
            <option value="en">English</option>
            <option value="es">Spanish</option>
            <option value="fr">French</option>
            <option value="de">German</option>
            <option value="zh">Chinese</option>
            <option value="ja">Japanese</option>
            <option value="ar">Arabic</option>
            <option value="hi">Hindi</option>
            <option value="ru">Russian</option>
          </select>
        </div>
      </div>

      <!-- Main Chat Area -->
      <div class="main-content">
        <div class="chat-header">
          <button class="menu-toggle" id="menuToggle">
            <i class="fas fa-bars"></i>
          </button>

          <div class="chat-title">
            <div id="normalText">AI PROBLEM SOLVE</div>
          </div>
          <div class="chat-controls1">
            <button class="control-btn1" id="aiToggle">ON</button>
            <button class="control-btn" id="textColorBtn"></button>
          </div>
        </div>

        <div class="chat-container" id="chatContainer">
          <div class="welcome-message" id="welcomeMessage">
            <!-- AI Problem Solve Image with fallback -->
            <div class="ai-logo-container">
              <div class="image-loading" id="imageLoading">
                <div class="spinner"></div>
                <p>Loading AI Problem Solver...</p>
              </div>
              <img 
                src="https://images.unsplash.com/photo-1677442136019-21780ecad995?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" 
                alt="AI Problem Solver" 
                class="ai-logo-image"
                id="aiLogoImage"
                onload="imageLoaded()"
                onerror="imageFailed()"
              />
              <div class="image-fallback" id="imageFallback">
                ðŸ¤– AI PROBLEM SOLVER
              </div>
            </div>
            
            <!-- Welcome Text -->
            <p class="welcome-text">
              How can I help you today? I can assist with problem solving and much more!
            </p>
            
            <!-- Tagline -->
     
          </div>
          <div class="messages-container" id="messagesContainer"></div>
        </div>

        <div class="input-container">
          <div class="image-upload">
            <input
              type="file"
              id="imageInput"
              accept="image/*"
              style="display: none"
            />
            <button id="uploadBtn" class="upload-btn">
              <i class="fas fa-image"></i>
            </button>
            <span id="fileName" class="file-name"></span>
          </div>

          <div class="text-input-container">
            <textarea
              id="userInput"
              placeholder="Type your message here..."
              rows="1"
            ></textarea>

            <button id="sendButton" class="send-btn" onclick="sendMessage()">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Settings</h3>
          <button class="close-modal" id="closeSettings">&times;</button>
        </div>
        <div class="modal-body">
          <div class="tab-container">
            <div class="tab-buttons">
              <button class="tab-button active" data-tab="appearance">
                Appearance
              </button>
              <button class="tab-button" data-tab="history">History</button>
            </div>
            <div class="tab-content">
              <div class="tab-pane active" id="appearanceTab">
                <div class="setting-group">
                  <h4>Text Color</h4>
                  <div class="color-picker" id="textColorPicker">
                    <div
                      class="color-option active"
                      style="background-color: #333"
                      data-color="#333"
                    ></div>
                    <div
                      class="color-option"
                      style="background-color: #6a11cb"
                      data-color="#6a11cb"
                    ></div>
                    <div
                      class="color-option"
                      style="background-color: #2575fc"
                      data-color="#2575fc"
                    ></div>
                    <div
                      class="color-option"
                      style="background-color: #00c6ff"
                      data-color="#00c6ff"
                    ></div>
                    <div
                      class="color-option"
                      style="background-color: #e74c3c"
                      data-color="#e74c3c"
                    ></div>
                    <div
                      class="color-option"
                      style="background-color: #2ecc71"
                      data-color="#2ecc71"
                    ></div>
                    <div
                      class="color-option"
                      style="background-color: #f39c12"
                      data-color="#f39c12"
                    ></div>
                    <div
                      class="color-option"
                      style="background-color: #9b59b6"
                      data-color="#9b59b6"
                    ></div>
                  </div>
                </div>
              </div>

              <div class="tab-pane" id="historyTab">
                <h4>Chat History</h4>
                <div class="history-list" id="historyList"></div>
                <div class="history-actions">
                  <button
                    class="history-btn delete"
                    id="clearAllHistory"
                    onclick="clearChatHistory()"
                  >
                    Clear All History
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button class="btn btn-secondary" id="cancelSettings">Cancel</button>
          <button class="btn btn-primary" id="saveSettings">Save</button>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script>
    const BACKEND_URL = "https://python22.pythonanywhere.com/api/chat";

      // Authentication check REMOVED - Direct app initialization
      document.addEventListener("DOMContentLoaded", function () {
        console.log("AI Problem Solve - Main App Loading");
        
        // Direct initialization without login check
        console.log("App loading directly without authentication...");
        initializeApp();
      });

      // Image loading functions
      function imageLoaded() {
        const loadingElement = document.getElementById('imageLoading');
        const imageElement = document.getElementById('aiLogoImage');
        const fallbackElement = document.getElementById('imageFallback');
        
        if (loadingElement) loadingElement.style.display = 'none';
        if (imageElement) imageElement.style.display = 'block';
        if (fallbackElement) fallbackElement.style.display = 'none';
      }

      function imageFailed() {
        const loadingElement = document.getElementById('imageLoading');
        const imageElement = document.getElementById('aiLogoImage');
        const fallbackElement = document.getElementById('imageFallback');
        
        if (loadingElement) loadingElement.style.display = 'none';
        if (imageElement) imageElement.style.display = 'none';
        if (fallbackElement) fallbackElement.style.display = 'block';
      }

      // Function to restart welcome animation
      function restartWelcomeAnimation() {
        const welcomeMessage = document.getElementById("welcomeMessage");
        if (welcomeMessage) {
          welcomeMessage.style.display = "flex";
          
          // Reset animations for all animated elements
          const animatedElements = welcomeMessage.querySelectorAll('.ai-logo-image, .welcome-text, .tagline, .image-fallback');
          animatedElements.forEach(el => {
            el.style.animation = 'none';
            void el.offsetWidth; // Trigger reflow
            if (el.classList.contains('ai-logo-image') || el.classList.contains('image-fallback')) {
              el.style.animation = 'fadeInScale 1s ease-out forwards';
            } else {
              el.style.animation = 'fadeInUp 1s ease-out forwards';
            }
          });
        }
      }

      // Initialize app functionality
      function initializeApp() {
        console.log("Initializing app features...");

        // Tab switching
        const tabButtons = document.querySelectorAll(".tab-button");
        const tabPanes = document.querySelectorAll(".tab-pane");

        tabButtons.forEach((button) => {
          button.addEventListener("click", function () {
            const targetTab = this.getAttribute("data-tab");

            tabButtons.forEach((btn) => btn.classList.remove("active"));
            tabPanes.forEach((pane) => pane.classList.remove("active"));

            this.classList.add("active");
            document.getElementById(targetTab + "Tab").classList.add("active");
          });
        });

        // Modal functionality
        const settingsBtn = document.getElementById("settingsBtn");
        const settingsModal = document.getElementById("settingsModal");
        const closeSettings = document.getElementById("closeSettings");
        const cancelSettings = document.getElementById("cancelSettings");

        if (settingsBtn) {
          settingsBtn.addEventListener("click", function () {
            settingsModal.style.display = "block";
          });
        }

        if (closeSettings) {
          closeSettings.addEventListener("click", function() {
            settingsModal.style.display = "none";
          });
        }

        if (cancelSettings) {
          cancelSettings.addEventListener("click", function() {
            settingsModal.style.display = "none";
          });
        }

        // Save settings
        const saveSettings = document.getElementById("saveSettings");
        if (saveSettings) {
          saveSettings.addEventListener("click", function () {
            settingsModal.style.display = "none";
            alert("Settings saved successfully!");
          });
        }

        // Mobile menu toggle
        const menuToggle = document.getElementById("menuToggle");
        const sidebar = document.querySelector(".sidebar");

        if (menuToggle && sidebar) {
          menuToggle.addEventListener("click", function () {
            sidebar.classList.toggle("mobile-active");
          });
        }

        // Image upload functionality
        const imageInput = document.getElementById("imageInput");
        const uploadBtn = document.getElementById("uploadBtn");

        if (uploadBtn && imageInput) {
          uploadBtn.addEventListener("click", function () {
            imageInput.click();
          });
        }

        if (imageInput) {
          imageInput.addEventListener("change", function () {
            if (this.files && this.files[0]) {
              const fileName = document.getElementById("fileName");
              fileName.textContent = this.files[0].name;

              // Display the uploaded image in chat
              displayImageMessage(this.files[0], true);
            }
          });
        }

        console.log("App initialized successfully!");
      }

      // Display image message in chat
      function displayImageMessage(file, isUser) {
        const messagesContainer = document.getElementById("messagesContainer");
        const welcomeMessage = document.getElementById("welcomeMessage");

        // Hide welcome message if it's visible
        if (welcomeMessage) {
          welcomeMessage.style.display = "none";
        }

        const messageDiv = document.createElement("div");
        messageDiv.className = `message ${
          isUser ? "user-message" : "ai-message"
        }`;

        const messageHeader = document.createElement("div");
        messageHeader.className = "message-header";

        const avatar = document.createElement("img");
        avatar.className = "message-avatar";
        avatar.src = isUser
          ? "https://static.vecteezy.com/system/resources/previews/048/926/084/non_2x/silver-membership-icon-default-avatar-profile-icon-membership-icon-social-media-user-image-illustration-vector.jpg"
          : "https://cdn-icons-png.flaticon.com/512/4712/4712035.png";
        avatar.alt = isUser ? "User Avatar" : "AI Avatar";

        const sender = document.createElement("div");
        sender.className = "message-sender";
        sender.textContent = isUser ? "You" : "AI Problem Solver";

        messageHeader.appendChild(avatar);
        messageHeader.appendChild(sender);

        const messageImage = document.createElement("div");
        messageImage.className = "message-image";

        const img = document.createElement("img");
        img.src = URL.createObjectURL(file);
        img.alt = "Uploaded image";

        messageImage.appendChild(img);

        const messageTime = document.createElement("div");
        messageTime.className = "message-time";
        messageTime.textContent = new Date().toLocaleTimeString([], {
          hour: "2-digit",
          minute: "2-digit",
        });

        messageDiv.appendChild(messageHeader);
        messageDiv.appendChild(messageImage);
        messageDiv.appendChild(messageTime);

        messagesContainer.appendChild(messageDiv);

        // Scroll to bottom
        scrollAfterMessage();

        // If it's a user image, simulate AI response after a delay
        if (isUser) {
          setTimeout(() => {
            simulateAIResponse(file);
          }, 1000);
        }
      }

      // Simulate AI response with image
      function simulateAIResponse(userImageFile) {
        const messagesContainer = document.getElementById("messagesContainer");

        // Create typing indicator
        const typingIndicator = document.createElement("div");
        typingIndicator.className = "typing-indicator";
        typingIndicator.innerHTML = `
          <div class="message-header">
            <img class="message-avatar" src="https://cdn-icons-png.flaticon.com/512/4712/4712035.png" alt="AI Avatar">
            <div class="message-sender">AI Problem Solver</div>
          </div>
          <div class="typing-dots">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
          </div>
        `;

        messagesContainer.appendChild(typingIndicator);
        scrollAfterMessage();

        // Remove typing indicator after delay and show response
        setTimeout(() => {
          typingIndicator.remove();

          // Create AI response
          const messageDiv = document.createElement("div");
          messageDiv.className = "message ai-message";

          const messageHeader = document.createElement("div");
          messageHeader.className = "message-header";

          const avatar = document.createElement("img");
          avatar.className = "message-avatar";
          avatar.src =
            "https://cdn-icons-png.flaticon.com/512/4712/4712035.png";
          avatar.alt = "AI Avatar";

          const sender = document.createElement("div");
          sender.className = "message-sender";
          sender.textContent = "AI Problem Solver";

          messageHeader.appendChild(avatar);
          messageHeader.appendChild(sender);

          const messageText = document.createElement("div");
          messageText.className = "message-text";
          messageText.textContent =
            "I've analyzed your image. Here's what I found:";

          // Create AI image response (simulated)
          const messageImage = document.createElement("div");
          messageImage.className = "message-image";

          const img = document.createElement("img");
          // In a real app, this would be the AI-processed image
          // For demo, we'll use a placeholder
          img.src =
            "https://via.placeholder.com/300x200/6a11cb/ffffff?text=AI+Analysis";
          img.alt = "AI Analysis Result";

          messageImage.appendChild(img);

          const additionalText = document.createElement("div");
          additionalText.className = "message-text";
          additionalText.textContent =
            "The AI has processed your image and provided the analysis above. Is there anything specific you'd like me to help with?";

          const messageTime = document.createElement("div");
          messageTime.className = "message-time";
          messageTime.textContent = new Date().toLocaleTimeString([], {
            hour: "2-digit",
            minute: "2-digit",
          });

          messageDiv.appendChild(messageHeader);
          messageDiv.appendChild(messageText);
          messageDiv.appendChild(messageImage);
          messageDiv.appendChild(additionalText);
          messageDiv.appendChild(messageTime);

          messagesContainer.appendChild(messageDiv);

          // Scroll to bottom
          scrollAfterAIResponse();
        }, 2000);
      }

      // Send message function
      function sendMessage() {
        const userInput = document.getElementById("userInput");
        const message = userInput.value.trim();

        if (message === "") return;

        // Hide welcome message
        const welcomeMessage = document.getElementById("welcomeMessage");
        if (welcomeMessage) {
          welcomeMessage.style.display = "none";
        }

        // Create user message
        const messagesContainer = document.getElementById("messagesContainer");
        const messageDiv = document.createElement("div");
        messageDiv.className = "message user-message";

        const messageHeader = document.createElement("div");
        messageHeader.className = "message-header";

        const avatar = document.createElement("img");
        avatar.className = "message-avatar";
        avatar.src =
          "https://static.vecteezy.com/system/resources/previews/048/926/084/non_2x/silver-membership-icon-default-avatar-profile-icon-membership-icon-social-media-user-image-illustration-vector.jpg";
        avatar.alt = "User Avatar";

        const sender = document.createElement("div");
        sender.className = "message-sender";
        sender.textContent = "You";

        messageHeader.appendChild(avatar);
        messageHeader.appendChild(sender);

        const messageText = document.createElement("div");
        messageText.className = "message-text";
        messageText.textContent = message;

        const messageTime = document.createElement("div");
        messageTime.className = "message-time";
        messageTime.textContent = new Date().toLocaleTimeString([], {
          hour: "2-digit",
          minute: "2-digit",
        });

        messageDiv.appendChild(messageHeader);
        messageDiv.appendChild(messageText);
        messageDiv.appendChild(messageTime);

        messagesContainer.appendChild(messageDiv);

        // Clear input and scroll
        userInput.value = "";
        scrollAfterMessage();

        // Simulate AI response
        setTimeout(() => {
          // Create typing indicator
          const typingIndicator = document.createElement("div");
          typingIndicator.className = "typing-indicator";
          typingIndicator.innerHTML = `
            <div class="message-header">
              <img class="message-avatar" src="https://cdn-icons-png.flaticon.com/512/4712/4712035.png" alt="AI Avatar">
              <div class="message-sender">AI Problem Solver</div>
            </div>
            <div class="typing-dots">
              <div class="typing-dot"></div>
              <div class="typing-dot"></div>
              <div class="typing-dot"></div>
            </div>
          `;

          messagesContainer.appendChild(typingIndicator);
          scrollAfterMessage();

          // Remove typing indicator after delay and show response
          setTimeout(() => {
            typingIndicator.remove();

            // Create AI response
            const aiMessageDiv = document.createElement("div");
            aiMessageDiv.className = "message ai-message";

            const aiMessageHeader = document.createElement("div");
            aiMessageHeader.className = "message-header";

            const aiAvatar = document.createElement("img");
            aiAvatar.className = "message-avatar";
            aiAvatar.src =
              "https://cdn-icons-png.flaticon.com/512/4712/4712035.png";
            aiAvatar.alt = "AI Avatar";

            const aiSender = document.createElement("div");
            aiSender.className = "message-sender";
            aiSender.textContent = "AI Problem Solver";

            aiMessageHeader.appendChild(aiAvatar);
            aiMessageHeader.appendChild(aiSender);

            const aiMessageText = document.createElement("div");
            aiMessageText.className = "message-text";

            // Simple response based on message content
            if (
              message.toLowerCase().includes("hello") ||
              message.toLowerCase().includes("hi")
            ) {
              aiMessageText.textContent = "Hello! How can I assist you today?";
            } else if (message.toLowerCase().includes("problem")) {
              aiMessageText.textContent =
                "I understand you have a problem. Could you please provide more details so I can help you better?";
            } else if (message.toLowerCase().includes("thank")) {
              aiMessageText.textContent =
                "You're welcome! Is there anything else I can help you with?";
            } else {
              aiMessageText.textContent =
                "Thank you for your message. I'm analyzing your request and will provide the best possible solution.";
            }

            const aiMessageTime = document.createElement("div");
            aiMessageTime.className = "message-time";
            aiMessageTime.textContent = new Date().toLocaleTimeString([], {
              hour: "2-digit",
              minute: "2-digit",
            });

            aiMessageDiv.appendChild(aiMessageHeader);
            aiMessageDiv.appendChild(aiMessageText);
            aiMessageDiv.appendChild(aiMessageTime);

            messagesContainer.appendChild(aiMessageDiv);

            // Scroll to bottom
            scrollAfterAIResponse();
          }, 1500);
        }, 500);
      }

      // AUTO SCROLL CODE - ChatGPT jaisa smooth auto scroll
      function autoScrollToBottom() {
        const messagesContainer = document.getElementById("messagesContainer");
        if (messagesContainer) {
          messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
      }

      function smoothAutoScroll() {
        const messagesContainer = document.getElementById("messagesContainer");
        if (messagesContainer) {
          messagesContainer.scrollTo({
            top: messagesContainer.scrollHeight,
            behavior: "smooth",
          });
        }
      }

      function scrollAfterMessage() {
        setTimeout(() => {
          smoothAutoScroll();
        }, 50);
      }

      function scrollAfterAIResponse() {
        setTimeout(() => {
          smoothAutoScroll();
        }, 100);
      }

      // Page load par scroll to bottom
      window.addEventListener("load", function () {
        setTimeout(() => {
          autoScrollToBottom();
        }, 500);
      });

      // Real-time auto scroll observer
      function initAutoScrollObserver() {
        const messagesContainer = document.getElementById("messagesContainer");

        if (messagesContainer) {
          const observer = new MutationObserver(function (mutations) {
            mutations.forEach(function (mutation) {
              if (mutation.type === "childList") {
                scrollAfterMessage();
              }
            });
          });

          observer.observe(messagesContainer, {
            childList: true,
            subtree: true,
          });
        }
      }

      // Initialize auto scroll
      initAutoScrollObserver();

      function clearChatHistory() {
        if (confirm("Are you sure you want to clear all chat history?")) {
          const messagesContainer =
            document.getElementById("messagesContainer");
          const welcomeMessage = document.getElementById("welcomeMessage");

          if (messagesContainer) {
            messagesContainer.innerHTML = "";
          }

          if (welcomeMessage) {
            // Restart animation when welcome message is shown again
            restartWelcomeAnimation();
          }

          console.log("Chat history cleared");
          alert("Chat history cleared!");
        }
      }
    </script>
    <script src="script.js"></script>
  </body>
</html>
